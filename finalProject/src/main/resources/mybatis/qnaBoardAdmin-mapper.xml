<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
  <mapper namespace="qnaBoardAdmin">
  
  	<select id="selectList" resultType="qnaBoardAdminDto" parameterType="com.anif.mvc.common.pagination.Criteria">
		SELECT *
		FROM (
			SELECT QNO, QGROUPNO, QGROUPSQ, QTITLETAB, QCTGY, QTITLE, MNO,
				TO_CHAR(QDATE, 'YYYY-MM-DD HH24:MI') AS qdateToChar, MNICK,
				ROW_NUMBER() OVER(ORDER BY QNO DESC) AS RNUM
			FROM QUESTIONBOARD JOIN MEMBER USING(MNO)) QB
			WHERE RNUM BETWEEN #{rowStart} AND #{rowEnd}
		ORDER BY QGROUPNO DESC, QGROUPSQ ASC
  	</select> 
  	<select id="listCount" resultType="int">
  	<![CDATA[
		SELECT COUNT(QNO)
		FROM QUESTIONBOARD
		WHERE QNO > 0
	]]>
  	</select>
  
  
  	<select id="selectOne" parameterType="int" resultType="qnaBoardAdminDto">
  		SELECT QNO, QGROUPNO, QGROUPSQ, QTITLETAB, QCTGY, QTITLE, QCONTENT, MNO, 
  				TO_CHAR(QDATE, 'YYYY-MM-DD HH24:MI:SS') AS qdateToChar, MNICK
  		FROM QUESTIONBOARD
  		JOIN MEMBER USING(MNO)
  		WHERE QNO=#{qno}
  	</select>
  	
  	<update id="update" parameterType="qnaBoardAdminDto">
		UPDATE QUESTIONBOARD
		SET QTITLE = #{qtitle}, QCONTENT = #{qcontent}
		WHERE QNO = #{qno}
	</update>


  	<delete id="delete" parameterType="int">
  		DELETE FROM QUESTIONBOARD
  		WHERE QNO = #{qno}
  	</delete>
  
  
  
  
  
  
  
  
  
  
  
  </mapper>
  
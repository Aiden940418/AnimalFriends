DROP TABLE CHATROOM;
DROP TABLE MESSAGE;

DROP SEQUENCE MSGNO;
DROP SEQUENCE CHATROOMID;

SELECT * FROM MESSAGE;
SELECT * FROM CHATROOM;

CREATE SEQUENCE MSGNO;
CREATE TABLE MESSAGE(
    MSGNO NUMBER NOT NULL PRIMARY KEY,
    MSGSENDERNO VARCHAR2(1000) NOT NULL,
    MSGRECEIVERNO VARCHAR2(1000) NOT NULL,
    MSGCONTENT VARCHAR2(1000) NOT NULL,
    MSGSENDTIME DATE NOT NULL,
    MSGREADTIME DATE NOT NULL,
    CHATROOMID NUMBER NOT NULL,
    READERMNO NUMBER NOT NULL,
    WRITERMNO NUMBER NOT NULL,
    FOREIGN KEY(READERMNO) REFERENCES MEMBER(MNO)ON DELETE CASCADE, 
    FOREIGN KEY(WRITERMNO) REFERENCES MEMBER(MNO)ON DELETE CASCADE
    );

CREATE SEQUENCE CHATROOMID;
CREATE TABLE CHATROOM(
    CHATROOMID NUMBER NOT NULL PRIMARY KEY,
    READERMNO NUMBER NOT NULL,
    WRITERMNO NUMBER NOT NULL,
    READERMNICK VARCHAR2(1000)NOT NULL,
    WRITERMNICK VARCHAR2(1000)NOT NULL,
    
    FOREIGN KEY(READERMNO) REFERENCES MEMBER(MNO)ON DELETE CASCADE, 
    FOREIGN KEY(WRITERMNO) REFERENCES MEMBER(MNO)ON DELETE CASCADE
);


INSERT INTO CHATROOM
		VALUES(CHATROOMID.NEXTVAL, 2, 1, '이순신', '관리자');




